# TASK-012: æœƒè©±é‡å‘½ååŠŸèƒ½æ”¯æ´ (å¾…å•Ÿå‹• ğŸ“„)

**å»ºç«‹æ—¥æœŸ**: 2025-02-22  
**å„ªå…ˆç´š**: ä¸­  
**ç‹€æ…‹**: ğŸ“‹ å¾…é–‹ç™¼

---

## ğŸ“‹ ä»»å‹™æ¦‚è¿°

ç›®å‰ `SessionManager` é›–ç„¶å¯ä»¥å„²å­˜æœƒè©±ï¼Œä½†ç¼ºä¹ä¸€å€‹æ˜ç¢ºçš„ã€Œæ¨™é¡Œ (Title)ã€æ¬„ä½èˆ‡å°æ‡‰çš„ä¿®æ”¹ä»‹é¢ã€‚æœ¬ä»»å‹™æ—¨åœ¨å¾Œç«¯å¯¦ä½œæœƒè©±é‡å‘½ååŠŸèƒ½ï¼Œä»¥ä¾¿ç”¨æˆ¶èƒ½æ›´ç›´è§€åœ°ç®¡ç†å¤šå€‹å°è©±ã€‚

---

## ğŸ¯ ç›®éŒ„èˆ‡ç›®æ¨™

- [ ] åœ¨ `Session` æ¨¡å‹ä¸­å¢åŠ  `title` æ¬„ä½ï¼ˆé è¨­ç‚º "æ–°å°è©±" æˆ–è¨Šæ¯é¦–å¥ï¼‰ã€‚
- [ ] å¯¦ä½œ `PATCH /api/sessions/{session_id}` ç«¯é»ã€‚
- [ ] æ›´æ–° `SessionManager` çš„å„²å­˜é‚è¼¯ï¼Œæ”¯æ´åŸåœ°æ›´æ–°æœƒè©±å…ƒæ•¸æ“šã€‚
- [ ] ç¢ºä¿ä¿®æ”¹å¾Œï¼Œå‰ç«¯é‡æ–°æ•´ç†æˆ–è®€å–åˆ—è¡¨èƒ½çœ‹åˆ°æ–°æ¨™é¡Œã€‚

---

## ğŸ› ï¸ æŠ€è¡“å¯¦ä½œè·¯å¾‘

### 1. æ¨¡å‹æ›´æ–°
ä¿®æ”¹ `martlet_molt/core/session.py` ä¸­çš„ `Session` é¡åˆ¥ï¼Œç¢ºä¿åŒ…å«æ¨™é¡Œå±¬æ€§ã€‚

### 2. ç®¡ç†å™¨é‚è¼¯
åœ¨ `SessionManager` å¢åŠ  `update_session_title(session_id, title)` æ–¹æ³•ã€‚è€ƒæ…®åˆ°ç›®å‰çš„ `.jsonl` å„²å­˜æ–¹å¼ï¼Œæ›´æ–°æ¨™é¡Œæ™‚éœ€å¯«å…¥æ–°çš„ç‹€æ…‹è¡Œã€‚

### 3. API å¯¦ä½œ
åœ¨ `martlet_molt/gateway/routes.py` å¢åŠ å°æ‡‰çš„éš¨æ©Ÿè·¯ç”±ï¼š
```python
@router.patch("/sessions/{session_id}")
async def rename_session(session_id: str, request: RenameRequest):
    ...
```

---

## ğŸ“ ä¿®æ”¹è·¯å¾‘æ¸…å–®

- `backend/system_a/martlet_molt/core/session.py`
- `backend/system_a/martlet_molt/gateway/routes.py`

---

## âœ… é©—è­‰æ–¹å¼

1. ä½¿ç”¨ `curl` æˆ– Postman å°ç‰¹å®š `session_id` ç™¼é€ PATCH è«‹æ±‚ã€‚
2. å‘¼å« `GET /api/sessions` æª¢æŸ¥å›å‚³çš„åˆ—è¡¨ä¸­æ¨™é¡Œæ˜¯å¦å·²è®Šæ›´ã€‚
3. é‡å•Ÿå¾Œå°æœå‹™ï¼Œç¢ºèªæ¨™é¡ŒæŒä¹…åŒ–æˆåŠŸã€‚
4. åŸ·è¡Œ `ruff check --fix` èˆ‡ `pyright`ã€‚
