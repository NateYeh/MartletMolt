# 📋 MartletMolt 任務管理 SOP

本文件定義了 MartletMolt 專案中任務的「生命週期管理」。遵循此 SOP 可確保開發過程具備可追溯性、條理性以及高品質的產出。

---

## 1. 任務生命週期概覽

1.  **需求分析**: 確立目標，評估可行性。
2.  **建立任務 (Pending/Planned)**: 撰寫規格書，加入 Backlog。
3.  **啟動開發 (Active Sprint)**: 標註為 ⏳，同步更新開發狀態。
4.  **驗證與修復**: 執行 `Ruff` 與 `Pyright` 檢查，進行程式碼驗證。
5.  **任務關閉 (Archive)**: 更新狀態為 ✅，將任務移至榮譽存檔區。

---

## 2. 如何添加新任務？

當有新想法或功能需求時，請執行以下步驟：

### Step 2.1: 建立詳細規格書
在 `docs/task/` 下建立 `.md` 檔案，命名規範為：`TASK_簡短描述.md`。
檔案內容應包含：
- **任務編號**: `TASK-XXX` (接續現有編號)
- **優先級**: 高 / 中 / 低
- **目標**: 解決什麼問題？
- **詳細規格**: 技術實作路徑、API 定義、UI 變更、修改路徑清單。
- **驗證方式**: 如何確認任務成功？

### Step 2.2: 更新總表 (`TASK_LIST.md`)
將新任務增加至 `📋 任務儲備 (Backlog)` 區塊。
- 格式：`### TASK-XXX: 任務名稱 📄`
- 註明說明、目標與關聯文件連結。

---

## 3. 如何執行任務 (Active Sprint)？

### Step 3.1: 狀態轉換
決定開始執行後，將任務從 `Backlog` 移至 `🔥 當前衝刺 (Active Sprints)`，並將標籤改為 ⏳。

### Step 3.2: 模組化開發
- 優先進行需求分析與架構規劃。
- **務必遵循 Pythonic 寫法**、添加 Type Hints。
- 所有 Exception 應使用 `logger.exception`。

### Step 3.3: 品質檢查 (必須執行)
在完成代碼撰寫後，提交前必須執行：
- `ruff check --fix` : 自動修正格式與標準錯誤。
- `pyright` : 靜態型別檢查。

---

## 4. 如何完成並關閉任務？

### Step 4.1: 更新任務文件狀態
將任務文件頂部的狀態標題改為 `(已完成 ✅)`，並記錄完成日期。

### Step 4.2: 遷移至 Completed 目錄
1.  將任務檔案從 `docs/task/` 移動至 `docs/task/Completed/` 目錄。
2.  在 `TASK_LIST.md` 中，將任務從 `當前衝刺` 區塊移除。

### Step 4.3: 系統同步 (若適用)
若變更涉及 A/B 系統同步，請執行：
- `make sync-a-to-b` 或 `make sync-b-to-a`

---

## 5. 檔案命名與路徑規範

- **任務目錄**: `docs/task/`
- **主要文件**: `TASK_LIST.md` (入口)
- **輔助計畫**: `docs/XXX_plan.md` (長期規劃)

---

*“有序的進化，是通往強大 Agent 的唯一路徑。”*
